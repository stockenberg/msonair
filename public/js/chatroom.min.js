var webrtc;var room=window.location.href.split("raum=")[1];var audioDevices=[];var videoDevices=[];navigator.mediaDevices.enumerateDevices().then(function(devices){for(var i=0;i!==devices.length;++i){var device=devices[i];if(device.kind==="audioinput"){device.label=device.label||"microphone "+(audioDevices.length+1);audioDevices.push(device);$(".inputs_audio").append("<button style='display: inline-block; font-size: 14px; margin-top:5px;'  class='button tiny small-3 medium-3 large-3 gears' data-source='"+device.deviceId+"'> "+device.label+"</button>")}else if(device.kind==="videoinput"){device.label=device.label||"camera "+(videoDevices.length+1);videoDevices.push(device);$(".inputs_video").append("<button style='display: inline-block; font-size: 14px; margin-top:5px;'  class='button tiny small-3 medium-3 large-3 gears' data-source='"+device.deviceId+"'> "+device.label+"</button>")}}});var mediaOptions={audio:true,video:true};function selectAudio(id){mediaOptions.audio={deviceId:id};$(".inputs_audio button").removeClass("active").removeClass("done");$("button[data-source="+id+"]").addClass("active")}function selectVideo(id){mediaOptions.video={deviceId:id};$(".inputs_video button").removeClass("active").removeClass("done");$("button[data-source="+id+"]").toggleClass("active")}function start(){if($(".inputs_audio button, .inputs_video button").hasClass("active")){$(".inputs_audio button.active, .inputs_video button.active").addClass("done");$(".inputs_audio button, .inputs_video button").removeClass("active")}$(".room").fadeIn(500);$(".start").remove();webrtc=new SimpleWebRTC({localVideoEl:"localVideo",remoteVideosEl:"remoteVideos",autoRequestMedia:true,media:mediaOptions});webrtc.on("readyToCall",function(){webrtc.joinRoom(room)})}$(document).ready(function(){$(".gears").click(function(e){e.preventDefault();if($(this).attr("data-status")=="open"){$(this).html("Video-Einstellungen");$(this).attr("data-status","close")}else if($(this).attr("data-status")=="close"){$(this).html("Einstellungen ausblenden");$(this).attr("data-status","open")}$(".settings").fadeToggle(500)});$("body").on("click",".inputs_audio button",function(){selectAudio($(this).attr("data-source"))});$("body").on("click",".inputs_video button",function(){selectVideo($(this).attr("data-source"))})});