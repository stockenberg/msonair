var calendar=$("#cal")||"";function Main(opts){this.id=typeof opts.duuuude==="undefined"?"":opts.duuuude;this.instrument=typeof opts.sweeeeet==="undefined"?"":opts.sweeeeet;this.flashContainer=document.getElementById("flashMessage")}var timeout=2e3;function checkFlashMessages(){if($(user.flashContainer).html()!=""){timeout+=2e3;$(user.flashContainer).fadeIn();setTimeout(function(){$(user.flashContainer).fadeOut(function(){$(user.flashContainer).empty()})},timeout)}}function writeFlashmessage(text){$(user.flashContainer).html("<p>"+text+"</p>");checkFlashMessages()}function fetchEvents(result){result=$.parseJSON(result);if(typeof result.flash==="string"){writeFlashmessage(result.flash)}calendar.fullCalendar("removeEvents");calendar.fullCalendar("addEventSource",result.success);calendar.fullCalendar("rerenderEvents")}function prepareForDatabase(start,end,jsevent,action,entry_id){_start=moment(start).format("YYYY-MM-DD HH:mm");_end=moment(end).format("YYYY-MM-DD HH:mm");$.ajax({method:"POST",url:"../src/ajax/AjaxHandler.php",data:{action:action,p:"manage-calendar",start:_start,end:_end,id:user.id,instrument:user.instrument,entry_id:entry_id}}).done(function(result){setTimeout(function(){fetchEvents(result)},100)})}$(document).ready(function(){checkFlashMessages()});